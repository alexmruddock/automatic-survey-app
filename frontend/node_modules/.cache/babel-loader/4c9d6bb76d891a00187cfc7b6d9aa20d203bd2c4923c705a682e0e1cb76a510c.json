{"ast":null,"code":"// Pass a callback function to `refreshToken` which will handle the redirection.\nexport default async function refreshToken(onFailure) {\n  const response = await fetch('https://bookish-pancake-q7w7vvr66ggfxp5j-3000.app.github.dev/token', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      refreshToken: localStorage.getItem('refreshToken')\n    })\n  });\n  if (response.ok) {\n    const data = await response.json();\n    localStorage.setItem('accessToken', data.accessToken);\n    return true;\n  } else {\n    // Handle failed refresh\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('refreshToken');\n    if (onFailure && typeof onFailure === 'function') {\n      onFailure(); // Call the failure callback\n    }\n\n    return false;\n  }\n}","map":{"version":3,"names":["refreshToken","onFailure","response","fetch","method","headers","body","JSON","stringify","localStorage","getItem","ok","data","json","setItem","accessToken","removeItem"],"sources":["/workspaces/automatic-survey-app/frontend/src/refreshToken.js"],"sourcesContent":["// Pass a callback function to `refreshToken` which will handle the redirection.\nexport default async function refreshToken(onFailure) {\n    const response = await fetch('https://bookish-pancake-q7w7vvr66ggfxp5j-3000.app.github.dev/token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ refreshToken: localStorage.getItem('refreshToken') })\n    });\n  \n    if (response.ok) {\n      const data = await response.json();\n      localStorage.setItem('accessToken', data.accessToken);\n      return true;\n    } else {\n      // Handle failed refresh\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n  \n      if (onFailure && typeof onFailure === 'function') {\n        onFailure(); // Call the failure callback\n      }\n      \n      return false;\n    }\n  }\n    "],"mappings":"AAAA;AACA,eAAe,eAAeA,YAAYA,CAACC,SAAS,EAAE;EAClD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oEAAoE,EAAE;IACjGC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAER,YAAY,EAAES,YAAY,CAACC,OAAO,CAAC,cAAc;IAAE,CAAC;EAC7E,CAAC,CAAC;EAEF,IAAIR,QAAQ,CAACS,EAAE,EAAE;IACf,MAAMC,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;IAClCJ,YAAY,CAACK,OAAO,CAAC,aAAa,EAAEF,IAAI,CAACG,WAAW,CAAC;IACrD,OAAO,IAAI;EACb,CAAC,MAAM;IACL;IACAN,YAAY,CAACO,UAAU,CAAC,aAAa,CAAC;IACtCP,YAAY,CAACO,UAAU,CAAC,cAAc,CAAC;IAEvC,IAAIf,SAAS,IAAI,OAAOA,SAAS,KAAK,UAAU,EAAE;MAChDA,SAAS,CAAC,CAAC,CAAC,CAAC;IACf;;IAEA,OAAO,KAAK;EACd;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}